# Password Reset Fix

## Issue
Users were receiving "Invalid reset token" errors when clicking password reset links from emails.

## Root Cause
The password reset token was being URL-encoded with `encodeURIComponent()` in the email notification service before being included in the reset link. When users clicked the link, browsers would automatically decode the URL, causing a mismatch between:
- **Token in database**: Plain text (e.g., `yapfcc25wzamjc8ken7`)
- **Token in email URL**: URL-encoded version
- **Token received by backend**: Decoded version from browser

Since the tokens generated by `generateVerificationToken()` only contain lowercase letters and numbers (no special characters), URL encoding was unnecessary and caused this mismatch.

## Solution
Removed URL encoding from the password reset email generation in `/backend/auth/notifications.ts`:

**Before:**
```typescript
const encodedToken = encodeURIComponent(token);
const resetUrl = `${appUrlValue}/auth/reset-password?token=${encodedToken}`;
```

**After:**
```typescript
const resetUrl = `${appUrlValue}/auth/reset-password?token=${token}`;
```

## Additional Improvements
Added debug logging to the reset password endpoint to help diagnose token-related issues:
- Logs the token received from the frontend
- Logs when a token is not found in the database

## Testing
Verified the fix works by:
1. Requesting a password reset via the API
2. Retrieving the token from the database
3. Successfully resetting the password with the plain token
4. Confirming the token works without URL encoding

## Impact
Users can now successfully reset their passwords by clicking the link in their email.
